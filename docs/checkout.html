<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous" />
    <link rel="stylesheet" href="appointment.css">
    <link rel="stylesheet" href="checkout.css">
</head>
<body>
    <div class="checkout-container">
        <img src="img/amreflogo.png" alt="Amref Logo" class="amref-logo">
        <h2 class="checkout-title mb-2">Confirm Your Appointment and Checkout</h2>
        <p class="checkout-desc">You are about to pay for your appointment. After payment, you can download your appointment receipt for your records.</p>
        <div id="successMessage" class="alert alert-success success-message" role="alert"></div>
        <div class="button-container">
            <button id="checkoutButton"><i class="fas fa-credit-card me-2"></i>Proceed to Checkout</button>
        </div>
        <button id="downloadReceiptButton" style="margin-top:20px;" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#receiptModal"><i class="fas fa-file-download me-2"></i>Download Receipt</button>
        <div class="form-text text-muted mt-1">View and print your appointment receipt at any time.</div>
        <hr class="section-divider">
        <div class="form-text text-muted">Need help? Contact <a href="mailto:Steveleo254@gmail.com">support</a> or call <a href="tel:+254758510206">+254758510206</a>.</div>
    </div>
    <!-- Receipt Modal -->
    <div class="modal fade" id="receiptModal" tabindex="-1" aria-labelledby="receiptModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-receipt-content">
          <div class="modal-header border-0 pb-0">
            <h5 class="modal-title receipt-header" id="receiptModalLabel">Appointment Receipt</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="receiptContentModal">
            <!-- Receipt content will be injected here -->
          </div>
          <div class="modal-footer border-0 pt-0">
            <button id="downloadPdfBtn" class="btn btn-primary" disabled><i class="fas fa-file-pdf me-2"></i><span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true" style="display: none;"></span>Download PDF</button>
            <button id="printReceiptBtn" class="btn btn-secondary ms-2" disabled><i class="fas fa-print me-2"></i>Print</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Payment Modal (unchanged for brevity) -->
    <div id="paymentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Choose Payment Method</h2>
                <span class="close-button">Ã—</span>
            </div>
            <div class="payment-options">
                <button class="payment-option-button" data-payment="safaricom">Safaricom (Kenya)</button>
                <button class="payment-option-button" data-payment="airtel">Airtel Money (Kenya)</button>
                <button class="payment-option-button" data-payment="googlepay">Google Pay</button>
                <button class="payment-option-button" data-payment="paypal">PayPal</button>
                <button class="payment-option-button" data-payment="creditcard">Credit Card</button>
                <button class="payment-option-button" data-payment="banktransfer">Bank Transfer</button>
                <button class="payment-option-button" data-payment="other">Other</button>
            </div>
            <div id="mobilePaymentDetails" class="payment-details">
                <h3>Mobile Money Payment</h3>
                <div class="form-group">
                    <label for="phoneNumber">Phone Number</label>
                    <input type="text" id="phoneNumber" placeholder="Enter your Safaricom/Airtel phone number">
                </div>
                <div class="form-group">
                    <label for="confirmationNumber">MPESA/Airtel Money Confirmation Code</label>
                    <input type="text" id="confirmationNumber" placeholder="Enter the confirmation code">
                </div>
            </div>
            <div id="creditCardDetails" class="payment-details">
                <h3>Credit Card Details</h3>
                <div class="form-group">
                    <label for="cardNumber">Card Number</label>
                    <input type="number" id="cardNumber" placeholder="Enter your card number">
                </div>
                <div class="form-group">
                    <label for="expiryDate">Expiry Date (MM/YY)</label>
                    <input type="text" id="expiryDate" placeholder="MM/YY">
                </div>
                <div class="form-group">
                    <label for="cvv">CVV</label>
                    <input type="number" id="cvv" placeholder="Enter CVV">
                </div>
            </div>
            <div id="otherPaymentDetails" class="payment-details" style="display: none;">
                <p>You will be redirected to the respective payment gateway after clicking "Pay Now".</p>
            </div>
            <div class="loading-spinner" id="loadingSpinner"></div>
            <button id="payButton" class="pay-button">Pay Now</button>
            <button id="retryButton" class="retry-button" style="display: none;">Retry Payment</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <script src="checkout.js"></script>
</body>
</html>